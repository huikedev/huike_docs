---
title: 控制器
order: 10
toc: menu
---

## 基本概念

控制器负责接收请求、逻辑分发和响应请求。不应该在控制器中操作模型和封装数据。在本项目中，请遵循以下原则：

+ 控制器的所有方法**必须**与路由对应
+ 控制器的所有方法的访问修饰符**必须**为 `public`
+ 控制器中**不应该**进行**访问权限**的校验
+ 控制器**不应该**使用`Controller`后缀
+ 控制器**尽量不使用**构造函数
+ 控制器继承**不应该**超过一层
+ 控制器响应**必须**通过系统响应器来完成

## 逻辑分发

如`User::profile()`方法需要根据客户端是否为移动端返回不同的数据格式，我们可以这样实现：

```php
    public function profile()
    {
        if(Request::isMobile()){
            return (new AppResponse())->setLogicControllerPath('mobile')->render();
        }
        return (new AppResponse())->render();
    }
```

这样请求就会被分发到不同逻辑控制器，在逻辑控制器中对数据进行封装即可。

<Alert type="info">
本项目极大的精简了控制器中的逻辑，大多数控制器方法一行代码即可实现逻辑分发、自动参数验证。这么做的意义在于，在项目开发中，减少控制器中的逻辑判断代码，对业务逻辑进行高度抽象后再聚合。
</Alert>


